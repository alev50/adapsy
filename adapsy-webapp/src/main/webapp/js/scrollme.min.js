var scrollme=function($){var e={},t=$(document),a=$(window);return e.body_height=0,e.viewport_height=0,e.viewport_top=0,e.viewport_bottom=0,e.viewport_top_previous=-1,e.elements=[],e.elements_in_view=[],e.property_defaults={opacity:1,translatex:0,translatey:0,translatez:0,rotatex:0,rotatey:0,rotatez:0,scale:1,scalex:1,scaley:1,scalez:1},e.scrollme_selector="._scroll",e.animateme_selector="._animate",e.update_interval=10,e.easing_functions={linear:function(e){return e},easeout:function(e){return e*e*e},easein:function(e){return e=1-e,1-e*e*e},easeinout:function(e){return e<.5?4*e*e*e:(e=1-e,1-4*e*e*e)}},e.init_events=["load","DOMContentLoaded","page:load","page:change"],e.init_if=function(){return!0},e.init=function(){return!!e.init_if()&&(e.init_elements(),e.on_resize(),a.on("resize orientationchange",function(){e.on_resize()}),a.on("load",function(){setTimeout(function(){e.on_resize()},100)}),setInterval(e.update,e.update_interval),!0)},e.init_elements=function(){$(e.scrollme_selector).each(function(){var t={};t.element=$(this);var a=[];$(this).find(e.animateme_selector).addBack(e.animateme_selector).each(function(){var t={};t.element=$(this),t.when=t.element.data("when"),t.from=t.element.data("from"),t.to=t.element.data("to"),t.element.is("[data-crop]")?t.crop=t.element.data("crop"):t.crop=!0,t.element.is("[data-easing]")?t.easing=e.easing_functions[t.element.data("easing")]:t.easing=e.easing_functions.easeout;var n={};t.element.is("[data-opacity]")&&(n.opacity=t.element.data("opacity")),t.element.is("[data-translatex]")&&(n.translatex=t.element.data("translatex")),t.element.is("[data-translatey]")&&(n.translatey=t.element.data("translatey")),t.element.is("[data-translatez]")&&(n.translatez=t.element.data("translatez")),t.element.is("[data-rotatex]")&&(n.rotatex=t.element.data("rotatex")),t.element.is("[data-rotatey]")&&(n.rotatey=t.element.data("rotatey")),t.element.is("[data-rotatez]")&&(n.rotatez=t.element.data("rotatez")),t.element.is("[data-scale]")&&(n.scale=t.element.data("scale")),t.element.is("[data-scalex]")&&(n.scalex=t.element.data("scalex")),t.element.is("[data-scaley]")&&(n.scaley=t.element.data("scaley")),t.element.is("[data-scalez]")&&(n.scalez=t.element.data("scalez")),t.properties=n,a.push(t)}),t.effects=a,e.elements.push(t)})},e.update=function(){window.requestAnimationFrame(function(){e.update_viewport_position(),e.viewport_top_previous!=e.viewport_top&&(e.update_elements_in_view(),e.animate()),e.viewport_top_previous=e.viewport_top})},e.animate=function(){for(var t=e.elements_in_view.length,a=0;a<t;a++)for(var n=e.elements_in_view[a],i=n.effects.length,o=0;o<i;o++){var r=n.effects[o];switch(r.when){case"view":case"span":var s=n.top-e.viewport_height,l=n.bottom;break;case"exit":var s=n.bottom-e.viewport_height,l=n.bottom;break;default:var s=n.top-e.viewport_height,l=n.top}r.crop&&(s<0&&(s=0),l>e.body_height-e.viewport_height&&(l=e.body_height-e.viewport_height));var m=(e.viewport_top-s)/(l-s),p=r.from,_=r.to,c=_-p,u=(m-p)/c,d=r.easing(u),v=e.animate_value(m,d,p,_,r,"opacity"),h=e.animate_value(m,d,p,_,r,"translatey"),f=e.animate_value(m,d,p,_,r,"translatex"),w=e.animate_value(m,d,p,_,r,"translatez"),g=e.animate_value(m,d,p,_,r,"rotatex"),y=e.animate_value(m,d,p,_,r,"rotatey"),x=e.animate_value(m,d,p,_,r,"rotatez"),z=e.animate_value(m,d,p,_,r,"scale"),b=e.animate_value(m,d,p,_,r,"scalex"),k=e.animate_value(m,d,p,_,r,"scaley"),F=e.animate_value(m,d,p,_,r,"scalez");"scale"in r.properties&&(b=z,k=z,F=z),r.element.css({opacity:v,transform:"translate3d( "+f+"px , "+h+"px , "+w+"px ) rotateX( "+g+"deg ) rotateY( "+y+"deg ) rotateZ( "+x+"deg ) scale3d( "+b+" , "+k+" , "+F+" )"})}},e.animate_value=function(t,a,n,i,o,r){var s=e.property_defaults[r];if(!(r in o.properties))return s;var l=o.properties[r],m=i>n;if(t<n&&m)return s;if(t>i&&m)return l;if(t>n&&!m)return s;if(t<i&&!m)return l;var p=s+a*(l-s);switch(r){case"opacity":p=p.toFixed(2);break;case"translatex":p=p.toFixed(0);break;case"translatey":p=p.toFixed(0);break;case"translatez":p=p.toFixed(0);break;case"rotatex":p=p.toFixed(1);break;case"rotatey":p=p.toFixed(1);break;case"rotatez":p=p.toFixed(1);break;case"scale":p=p.toFixed(3)}return p},e.update_viewport_position=function(){e.viewport_top=a.scrollTop(),e.viewport_bottom=e.viewport_top+e.viewport_height},e.update_elements_in_view=function(){e.elements_in_view=[];for(var t=e.elements.length,a=0;a<t;a++)e.elements[a].top<e.viewport_bottom&&e.elements[a].bottom>e.viewport_top&&e.elements_in_view.push(e.elements[a])},e.on_resize=function(){e.update_viewport(),e.update_element_heights(),e.update_viewport_position(),e.update_elements_in_view(),e.animate()},e.update_viewport=function(){e.body_height=t.height(),e.viewport_height=a.height()},e.update_element_heights=function(){for(var t=e.elements.length,a=0;a<t;a++){var n=e.elements[a].element.outerHeight(),i=e.elements[a].element.offset();e.elements[a].height=n,e.elements[a].top=i.top,e.elements[a].bottom=i.top+n}},t.one(e.init_events.join(" "),function(){e.init()}),e}(jQuery);